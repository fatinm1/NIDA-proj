(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5489:function(t,e,n){Promise.resolve().then(n.t.bind(n,2445,23)),Promise.resolve().then(n.bind(n,8810))},8810:function(t,e,n){"use strict";n.r(e),n.d(e,{AuthProvider:function(){return c},useAuth:function(){return a}});var r=n(7437),o=n(2265),u=n(4175);let i=(0,o.createContext)(void 0);function c(t){let{children:e}=t,[n,c]=(0,o.useState)(null),[a,l]=(0,o.useState)(!1),[s,f]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let t=(0,u.vF)();t&&(c(t),l(!0)),(0,u.ts)().then(t=>{t?(c(t),(0,u.c7)(t),l(!0)):((0,u.Jp)(),c(null),l(!1))}).catch(()=>{(0,u.Jp)(),c(null),l(!1)}).finally(()=>{f(!1)})},[]);let h=async()=>{try{await fetch("/v1/auth/logout",{method:"POST",credentials:"include"})}catch(t){}c(null),l(!1),(0,u.Jp)()};return(0,r.jsx)(i.Provider,{value:{user:n,isAuthenticated:a,login:t=>{c(t),l(!0),(0,u.c7)(t)},logout:h,loading:s},children:e})}function a(){let t=(0,o.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},4175:function(t,e,n){"use strict";async function r(t){let e=await fetch("".concat("http://localhost:5001","/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw Error((await e.json()).error||"Login failed");return e.json()}async function o(t){let e=await fetch("".concat("http://localhost:5001","/v1/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw Error((await e.json()).error||"Registration failed");return e.json()}async function u(){try{let t=await fetch("".concat("http://localhost:5001","/v1/auth/me"),{credentials:"include"});if(t.ok)return(await t.json()).user;return null}catch(t){return null}}function i(){let t=localStorage.getItem("user");if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}function c(t){localStorage.setItem("user",JSON.stringify(t))}function a(){localStorage.removeItem("user")}n.d(e,{Jp:function(){return a},c7:function(){return c},ts:function(){return u},vF:function(){return i},x4:function(){return r},z2:function(){return o}})},2445:function(){},622:function(t,e,n){"use strict";var r=n(2265),o=Symbol.for("react.element"),u=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,u={},l=null,s=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(s=e.ref),e)i.call(e,r)&&!a.hasOwnProperty(r)&&(u[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===u[r]&&(u[r]=e[r]);return{$$typeof:o,type:t,key:l,ref:s,props:u,_owner:c.current}}e.Fragment=u,e.jsx=l,e.jsxs=l},7437:function(t,e,n){"use strict";t.exports=n(622)}},function(t){t.O(0,[971,938,744],function(){return t(t.s=5489)}),_N_E=t.O()}]);