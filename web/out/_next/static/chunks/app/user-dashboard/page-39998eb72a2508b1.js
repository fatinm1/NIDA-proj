(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{380:function(e,s,l){Promise.resolve().then(l.bind(l,1483))},1483:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return N}});var t=l(7437),a=l(2265),r=l(8810),d=l(4033),n=l(5883),i=l(1541),c=l(6637),o=l(9036),x=l(2812),m=l(2369),u=l(519),h=l(2851),b=l(5817),p=l(4530),g=l(9670),j=l(826);function N(){let{user:e,isAuthenticated:s,loading:l,logout:N}=(0,r.useAuth)(),w=(0,d.useRouter)(),[f,E]=(0,a.useState)(null),[v,A]=(0,a.useState)(null),[y,B]=(0,a.useState)([]),[F,k]=(0,a.useState)({name:"",address:"",city:"",state:"",zipCode:"",signerName:"",signerTitle:"",email:"",phone:""}),[D,C]=(0,a.useState)(!1),[_,P]=(0,a.useState)(0),[S,R]=(0,a.useState)(null),[Z,I]=(0,a.useState)(!1),[T,z]=(0,a.useState)(null),[U,M]=(0,a.useState)(null),O=(0,a.useRef)(null);(0,a.useEffect)(()=>{l||(s?(null==e?void 0:e.role)==="ADMIN"&&w.push("/dashboard"):w.push("/login"))},[l,s,e,w]),(0,a.useEffect)(()=>{e&&"USER"===e.role&&L()},[e]);let L=async()=>{try{var s;let l=await j.x.listRules((null==e?void 0:null===(s=e.id)||void 0===s?void 0:s.toString())||"");B(l.rules)}catch(e){console.error("Error loading admin rules:",e),B([])}},Y=async()=>{if(f&&v){C(!0),z(null),M(null),P(0),I(!1);try{P(0),await new Promise(e=>setTimeout(e,1e3)),P(1),await new Promise(e=>setTimeout(e,1e3)),P(2),await new Promise(e=>setTimeout(e,1500)),P(3),await new Promise(e=>setTimeout(e,1e3)),P(4),await new Promise(e=>setTimeout(e,1e3));let e={success:!0,document:{...v,output_path:"/outputs/processed_".concat(Date.now(),"_").concat(f.name)},processing_result:{rules_applied:y.length,changes_made:4,processing_time:"5.5s"}};R(e.processing_result),A(e.document),I(!0),M("Document processed successfully!")}catch(e){z("Error processing document. Please try again.")}finally{C(!1),P(0)}}},G=async()=>{if(!(null==v?void 0:v.output_path)){z("No processed document available for download");return}try{M("Document downloaded successfully!")}catch(e){z("Error downloading document. Please try again.")}},V=(e,s)=>{k(l=>({...l,[e]:s}))},W=e=>{let s="w-4 h-4";switch(e){case"term":return(0,t.jsx)("div",{className:"".concat(s," bg-blue-500 rounded-full")});case"parties":return(0,t.jsx)("div",{className:"".concat(s," bg-green-500 rounded-full")});case"liability":return(0,t.jsx)("div",{className:"".concat(s," bg-yellow-500 rounded-full")});default:return(0,t.jsx)("div",{className:"".concat(s," bg-purple-500 rounded-full")})}};return l?(0,t.jsx)("div",{className:"min-h-screen bg-[#0B1220] text-[#E5E7EB] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-[#60A5FA] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-xl text-[#E5E7EB]/80",children:"Loading..."})]})}):s&&(null==e?void 0:e.role)!=="ADMIN"?(0,t.jsxs)("div",{className:"min-h-screen bg-[#0B1220] text-[#E5E7EB]",children:[(0,t.jsx)("header",{className:"bg-[#0B1220]/90 backdrop-blur-md border-b border-white/10 sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-[#60A5FA] rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-xl font-semibold text-white",children:"NDA Redline"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("span",{className:"text-sm text-[#E5E7EB]/60",children:"User Dashboard"}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400 border border-green-500/30",children:"USER"}),(0,t.jsx)("button",{onClick:()=>{N(),w.push("/")},className:"text-[#E5E7EB]/60 hover:text-[#E5E7EB]/80 transition-colors",children:(0,t.jsx)(n.Z,{className:"w-5 h-5"})})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"User Dashboard"}),(0,t.jsx)("p",{className:"text-xl text-[#E5E7EB]/80 max-w-3xl mx-auto",children:"Process your NDA documents using AI-powered redlining with admin-defined rules."})]}),T&&(0,t.jsx)("div",{className:"mb-8 bg-red-500/20 border border-red-500/30 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-red-500 rounded-full"}),(0,t.jsx)("span",{className:"text-red-400",children:T})]})}),U&&(0,t.jsx)("div",{className:"mb-8 bg-green-500/20 border border-green-500/30 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-green-400",children:U})]})}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"Upload NDA Document"]}),f?(0,t.jsx)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(c.Z,{className:"w-8 h-8 text-[#60A5FA]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:f.name}),(0,t.jsxs)("p",{className:"text-sm text-[#E5E7EB]/60",children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),(0,t.jsx)("button",{onClick:()=>E(null),className:"text-[#E5E7EB]/60 hover:text-white transition-colors",children:"\xd7"})]})}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center hover:border-[#60A5FA]/40 transition-colors",children:[(0,t.jsx)("input",{type:"file",accept:".docx",onChange:s=>{var l;let t=null===(l=s.target.files)||void 0===l?void 0:l[0];t&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t.type?(E(t),z(null),A({id:Date.now(),filename:t.name,original_filename:t.name,file_path:URL.createObjectURL(t),file_size:t.size,status:"uploaded",user_id:(null==e?void 0:e.id)||1,uploaded_at:new Date().toISOString()})):z("Please upload a valid .docx file")},className:"hidden",id:"file-upload",ref:O}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,t.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4 text-[#60A5FA]"}),(0,t.jsx)("p",{className:"text-lg font-medium text-white mb-2",children:"Drop your NDA here"}),(0,t.jsx)("p",{className:"text-[#E5E7EB]/60",children:"or click to browse"}),(0,t.jsx)("p",{className:"text-sm text-[#E5E7EB]/40 mt-2",children:"Supports .docx files only"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"Admin's Redlining Rules"]}),(0,t.jsx)("div",{className:"space-y-4",children:y.length>0?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-[#E5E7EB]/80",children:"Active Rules:"}),y.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 bg-[#1F2937] rounded-lg p-3",children:[W(e.category),(0,t.jsxs)("div",{children:[e.name&&(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:e.name}),(0,t.jsx)("span",{className:"text-sm text-[#E5E7EB]",children:e.instruction})]})]},s))]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-4 text-[#E5E7EB]/40"}),(0,t.jsx)("p",{className:"text-[#E5E7EB]/60",children:"No redlining rules defined yet"}),(0,t.jsx)("p",{className:"text-sm text-[#E5E7EB]/40 mt-2",children:"Your admin will create rules for document processing"}),(0,t.jsx)("p",{className:"text-xs text-[#E5E7EB]/30 mt-1",children:"Rules will appear here once they're created"})]})})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"Firm Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Firm Name"}),(0,t.jsx)("input",{type:"text",value:F.name,onChange:e=>V("name",e.target.value),placeholder:"Enter your law firm name",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:F.address,onChange:e=>V("address",e.target.value),placeholder:"Enter street address",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",value:F.city,onChange:e=>V("city",e.target.value),placeholder:"Enter city",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"State"}),(0,t.jsx)("input",{type:"text",value:F.state,onChange:e=>V("state",e.target.value),placeholder:"Enter state (e.g., NY)",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"ZIP Code"}),(0,t.jsx)("input",{type:"text",value:F.zipCode,onChange:e=>V("zipCode",e.target.value),placeholder:"Enter ZIP code",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Signer Name"}),(0,t.jsx)("input",{type:"text",value:F.signerName,onChange:e=>V("signerName",e.target.value),placeholder:"Enter signer's full name",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",value:F.signerTitle,onChange:e=>V("signerTitle",e.target.value),placeholder:"Enter signer's title",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:F.email,onChange:e=>V("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#E5E7EB]/60 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:F.phone,onChange:e=>V("phone",e.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-[#E5E7EB]/40 focus:outline-none focus:border-[#60A5FA]"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"Document Processing"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:Y,disabled:!f||D,className:"w-full bg-[#60A5FA] hover:bg-[#60A5FA]/90 disabled:bg-[#60A5FA]/40 text-white py-4 rounded-lg font-semibold text-lg transition-all duration-200 hover:shadow-lg hover:shadow-[#60A5FA]/25 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{className:"w-5 h-5 animate-spin"}),(0,t.jsx)("span",{children:"AI Processing..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Start AI Redlining Process"})]})}),v&&(0,t.jsxs)("button",{onClick:G,className:"w-full bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 inline mr-2"}),"Download Processed Document"]})]})]}),D&&(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"AI Agent Processing Your NDA"]}),(0,t.jsx)("div",{className:"space-y-4",children:[{id:1,name:"Document Analysis & Validation",details:"Analyzing document structure and content"},{id:2,name:"Applying Custom Instructions",details:"Processing admin-defined redlining rules"},{id:3,name:"AI-Powered Redlining",details:"AI agent applying intelligent modifications"},{id:4,name:"Inserting Firm Details",details:"Adding signature blocks and firm information"},{id:5,name:"Generating Redlined Document",details:"Creating final document with tracked changes"}].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-[#E5E7EB]",children:e.name}),s===_&&e.details&&(0,t.jsx)("p",{className:"text-sm text-[#E5E7EB]/60 mt-1",children:e.details})]}),s===_?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 text-[#60A5FA] animate-pulse"}),(0,t.jsx)("span",{className:"text-xs text-[#60A5FA]",children:"AI Working"})]}):s<_?(0,t.jsx)(p.Z,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/20 rounded-full"})]}),s===_&&(0,t.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#60A5FA] to-[#3B82F6] h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(100,Date.now()%2e3/20),"%")}})})]},e.id))})]}),Z&&(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 mr-2 text-[#60A5FA]"}),"AI-Redlined Document Preview"]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-2xl mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-red-200 rounded w-2/3 border-l-4 border-red-500"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/5"}),(0,t.jsx)("div",{className:"h-4 bg-blue-200 rounded w-1/2 border-l-4 border-blue-500"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-green-200 rounded w-5/6 border-l-4 border-green-500"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-4 bg-purple-200 rounded w-4/5 border-l-4 border-purple-500"})]})]}),S&&(0,t.jsxs)("div",{className:"space-y-3 text-sm mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,t.jsxs)("span",{className:"text-[#E5E7EB]",children:["Rules Applied: ",S.rules_applied]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,t.jsxs)("span",{className:"text-[#E5E7EB]",children:["Changes Made: ",S.changes_made]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,t.jsxs)("span",{className:"text-[#E5E7EB]",children:["Processing Time: ",S.processing_time]})]})]}),(0,t.jsxs)("button",{onClick:G,disabled:!(null==v?void 0:v.output_path),className:"w-full bg-[#10B981] hover:bg-[#10B981]/90 disabled:bg-[#10B981]/40 text-white py-3 rounded-lg font-semibold transition-all duration-200 hover:shadow-lg hover:shadow-[#10B981]/25 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:(null==v?void 0:v.output_path)?"Download Redlined Document":"No processed document available for download"})]})]})]})]})]})]}):null}}},function(e){e.O(0,[858,971,938,744],function(){return e(e.s=380)}),_N_E=e.O()}]);